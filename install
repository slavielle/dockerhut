#!/bin/bash


if [ -d .dockerhut ]; then
  echo "dockerhut seems already installed: .dockerhut directory exists"
else
  mkdir .dockerhut
  cp -r "$(dirname "$0")/installable/." .dockerhut/.

  if test "$(ls -A .dockerhut/runtime 2> /dev/null)"; then
    for F in .dockerhut/runtime/*.sh; do
       . $F
    done
  fi

  if [[ $DOCKERHUT_INSTALLED ]]; then
    echo "Dockerhut seems already installed"
  else
    mkdir .dockerhut/runtime
    mkdir .dockerhut/tmp
    mv .dockerhut/settings/container_settings.example.sh .dockerhut/settings/container_settings.sh
    mv .dockerhut/settings/host_settings.example.sh .dockerhut/settings/host_settings.sh
  fi

  echo "dockerhut installed"  
fi
